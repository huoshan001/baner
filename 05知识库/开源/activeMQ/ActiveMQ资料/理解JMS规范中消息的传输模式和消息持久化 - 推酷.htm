<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0039)http://www.tuicool.com/articles/Z3QrqaQ -->
<!--
 ______________ 
< TUICOOL.COM >
 -------------- 
        \   ^__^
         \  (**)\__$__$__
            (__)\       )\/\
             U  ||------|
                ||     ||
--><HTML><HEAD><META 
content="IE=8.0000" http-equiv="X-UA-Compatible">
<TITLE>理解JMS规范中消息的传输模式和消息持久化 - 推酷</TITLE>
<META content="text/html; charset=UTF-8" http-equiv=Content-Type>
<META name=viewport content="width=device-width, initial-scale=1.0">
<META name=csrf-param content=authenticity_token>
<META name=csrf-token content=LrsquUhO7CwxitczgFtIC2G5hcdHv2LWoKJja2IYlFQ=>
<META name=description content=理解JMS规范中消息的传输模式和消息持久化><LINK rel="shortcut icon" 
type=image/x-icon href="http://static0.tuicool.com/favicon.ico"><LINK 
rel=stylesheet type=text/css 
href="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/application-bc9f103ffac633f3e0506001890d1135.css" 
media=screen><LINK rel=stylesheet 
href="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/font-awesome.min.css">
<SCRIPT type=text/javascript 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/application-9d8e2864bc094ddf228d2147120a4b1f.js"></SCRIPT>
<!--[if IE 7]>
  <link rel="stylesheet" href="http://assets.tuicool.com/assets/font-awesome-ie7.min.css">
  <![endif]-->
<SCRIPT type=text/javascript 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/tip.js"></SCRIPT>

<SCRIPT type=text/javascript 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/m.js"></SCRIPT>

<SCRIPT src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/ds.js"></SCRIPT>

<SCRIPT type=text/javascript 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/spin.min.js"></SCRIPT>
<LINK rel=stylesheet href="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/github.css">
<META name=GENERATOR content="MSHTML 8.00.7601.17622"></HEAD>
<BODY>
<DIV id=header class=navbar-fixed-top>
<DIV class=container>
<DIV class=navbar>
<DIV class=navbar-inner><A class="btn btn-navbar" data-target=".nav-collapse" 
data-toggle="collapse"><SPAN class=icon-bar></SPAN><SPAN 
class=icon-bar></SPAN><SPAN class=icon-bar></SPAN><SPAN 
class=icon-bar></SPAN></A><A class=brand href="http://www.tuicool.com/">推酷</A> 
<NAV class="nav-collapse collapse">
<UL class="nav navbar primary-nav">
  <LI class=active><A href="http://www.tuicool.com/ah">文章 </A></LI>
  <LI><A href="http://www.tuicool.com/sites/hot">站点 </A></LI>
  <LI><A href="http://www.tuicool.com/topics">主题 </A></LI>
  <LI><A href="http://course.tuicool.com/">公开课 </A></LI>
  <LI><A href="http://huodong.tuicool.com/">活动 </A></LI>
  <LI><A href="http://www.tuicool.com/mobile">客户端 <SUP 
  style="COLOR: #16a085; FONT-SIZE: 0.8em">荐</SUP> </A></LI>
  <LI class="dropdown  "><A class=dropdown-toggle 
  href="http://www.tuicool.com/articles/Z3QrqaQ#" data-toggle="dropdown">周刊 <B 
  class=caret></B></A>
  <UL class=dropdown-menu>
    <LI><A href="http://www.tuicool.com/mags">编程狂人</A></LI>
    <LI><A href="http://www.tuicool.com/mags/design">设计匠艺</A></LI>
    <LI><A href="http://www.tuicool.com/mags/startup">创业周刊</A></LI>
    <LI><A href="http://www.tuicool.com/mags/tech">科技周刊</A></LI>
    <LI><A href="http://www.tuicool.com/mags/guru">Guru Weekly</A></LI>
    <LI><A href="http://www.tuicool.com/articles/weekly">一周拾遗</A></LI></UL></LI>
  <LI class="dropdown  "><A class=dropdown-toggle 
  href="http://www.tuicool.com/articles/Z3QrqaQ#" data-toggle="dropdown">更多 <B 
  class=caret></B></A>
  <UL class=dropdown-menu>
    <LI><A href="http://www.tuicool.com/bbs">讨论区</A></LI>
    <LI><A href="http://www.tuicool.com/about">关于我们</A></LI></UL></LI></UL>
<FORM class="navbar-search pull-left" 
action=http://www.tuicool.com/search><INPUT class="search-query span2" type=text 
name=kw placeholder="搜索"> </FORM>
<UL class="nav pull-right">
  <LI><A 
href="http://www.tuicool.com/login">登录</A></LI></UL></NAV></DIV></DIV></DIV></DIV>
<DIV id=flash_container class=noPrint></DIV>
<DIV class=container-fluid>
<DIV class="row-fluid article_row_fluid">
<DIV class="span8 contant article_detail_bg">
<H1>理解JMS规范中消息的传输模式和消息持久化</H1>
<DIV class=article_meta>
<DIV style="MARGIN-BOTTOM: 5px"><SPAN class=timestamp>时间&nbsp;2014-05-18 
13:15:34 </SPAN><SPAN class=from><I class=icon-globe></I><A 
class="cut cut28 from" href="http://www.tuicool.com/sites/vQZRB3" 
target=_blank>CSDN博客 </A></SPAN></DIV>
<DIV class=source><I style="FLOAT: left">原文</I>&nbsp; <A 
style="DISPLAY: inline-block" class="cut cut70" 
href="http://blog.csdn.net/aitangyong/article/details/26132913?utm_source=tuicool&amp;utm_medium=referral">http://blog.csdn.net/aitangyong/article/details/26132913?utm_source=tuicool&amp;utm_medium=referral</A> 
</DIV>
<DIV><SPAN>主题</SPAN> <A href="http://www.tuicool.com/topics/11070021" 
target=_blank><SPAN class=new-label>JMS</SPAN> </A><A 
href="http://www.tuicool.com/topics/11000064" target=_blank><SPAN 
class=new-label>数据库</SPAN> </A></DIV></DIV>
<DIV id=nei class=article_body>
<DIV>
<P><SPAN>&nbsp; &nbsp; &nbsp; 
JMS规范定义了2种消息传输模式：持久传送模式和非持久传输模式。发送者可以通过如下类似的代码进行设置</SPAN> </P><PRE class=prettyprint>TopicPublisher publihser = session.createPublisher(topic);

// 设置持久化传输
publihser.setDeliveryMode(DeliveryMode.PERSISTENT);</PRE>这种方式对publisher发送的所有消息都有效，相当于是一个全局的效果。如果只是想设置某一个消息的传输模式，可以通过以下代码设置消息头的属性来实现 
<PRE class=prettyprint>TextMessage message = session.createTextMessage(text);
		
message.setJMSDeliveryMode(DeliveryMode.PERSISTENT);</PRE>&nbsp; &nbsp; 
&nbsp;使用传输模式是一件很容易的事，直接调用API就可以了。那什么是传输模式呢？传输模式是用来控制消息属性的，DeliveryMode.PERSISTENT代表这是持久消息，DeliveryMode.NON_PERSISTENT代表是非持久消息。个人觉得传输模式和消息持久化是同一个概念，只不过是不同的叫法而已。 

<H2><SPAN>1.NON_PERSISTENT模式和</SPAN> <SPAN>PERSISTENT模式</SPAN> </H2>
<P><SPAN>&nbsp; &nbsp;对于非持久的消息，JMS 
provider不会将它存到文件/数据库等稳定的存储介质中。也就是说非持久消息驻留在内存中，如果jms provider宕机，那么内存中的非持久消息会丢失。A 
JMS provider must diliver a NON_PERSISTENT message 
<SPAN><STRONG>at-most-once</STRONG> 
</SPAN>。对于持久消息，消息提供者会使用存储-转发机制，先将消息存储到稳定介质中，等消息发送成功后再删除。如果jms 
provider挂掉了，那么这些未送达的消息不会丢失；jms provider恢复正常后，会重新读取这些消息，并传送给对应的消费者。 <SPAN>A JMS 
provider must diliver a PERSISTENT message <SPAN><STRONG>once</STRONG> 
</SPAN></SPAN><SPAN><SPAN><STRONG>-and-only-once</STRONG> 
</SPAN></SPAN><SPAN>。</SPAN> </SPAN></P>
<DIV>
<H2><SPAN>2.消息是否持久和是否送达</SPAN> </H2>
<P><SPAN>&nbsp; &nbsp; <SPAN><STRONG>消息的持久特性就是为了在异常发生的时候保证消息的送达</STRONG> 
</SPAN>。如果网络、jms 
provider、消息生产者、消息消费者都不会出现任何故障，那么持久消息和非持久消息就没有差别了。因为一旦消息成功传送给它的所有消费者，那么jms 
provider会从内存/硬盘上删除这些无用的消息。显然一切正常的情况下，使用PERSISTENT消息非常浪费， </SPAN>因为持久传送消 
<SPAN>息前，需要先将消息保存到硬盘；消息发送成功后，还需要将消息从硬盘上删除。</SPAN> 
<SPAN>但现实情况是，网络可能出现断连、provider和消费者都有可能宕机。因此对于一些非常重要，不容许任何丢失的消息，一定要采用 
<SPAN>PERSISTENT模式。</SPAN> </SPAN></P>
<DIV>
<H2><SPAN>3.持久消息和持久订阅者</SPAN> </H2></DIV>
<P>&nbsp; &nbsp;我的另一篇博客 &nbsp; <SPAN><A 
href="http://blog.csdn.net/aitangyong/article/details/26013387" 
rel=nofollow,noindex target=_blank><SPAN><SPAN>理解JMS规范中的持久订阅和非持久订阅</SPAN> 
</SPAN>&nbsp; 
</A></SPAN>&nbsp;介绍了持久订阅者和非持久订阅者的差别。持久订阅者和持久消息有什么区别和联系吗？持久消息发送给持久订阅者和非持久订阅有什么差别？非持久消息能够发送给持久订阅者吗？下面通过一些测试代码，来阐述持久消息和持久订阅者的关系。测试代码是基于ActiveMQ5.8.0版本。 
</P>
<DIV><BR></DIV>
<P><STRONG><SPAN>3.1生产者发送持久消息和非持久消息，但是消息没有消费者，即这是一条无用消息</SPAN> </STRONG></P>
<DIV><PRE class=prettyprint>package mq.aty.persistentmsg;

import javax.jms.DeliveryMode;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.jms.Topic;
import javax.jms.TopicConnection;
import javax.jms.TopicPublisher;
import javax.jms.TopicSession;

import mq.aty.JmsUtils;

/**
 * 直接运行该程序和activeMQ,不运行任何的消费者，然后观察持久化介质(我们使用了数据库)
 *
 */
public class NoReceiverTest
{
	private static TopicConnection connection = null;

	private static Topic topic = null;

	public static void main(String[] args) throws Exception
	{
		connection = JmsUtils.getConnection();
		topic = JmsUtils.getTopic();
		
		sentPersistent();
		sentNonPersistent();
		
		connection.close();
	}

	public static void sentPersistent() throws Exception
	{
		TopicSession session = connection.createTopicSession(false,
				Session.AUTO_ACKNOWLEDGE);

		TopicPublisher publihser = session.createPublisher(topic);

		publihser.setDeliveryMode(DeliveryMode.PERSISTENT);

		for (int i = 0; i &lt; 3; i++)
		{
			String text = "I am persistent message.order=" + i;

			TextMessage message = session.createTextMessage(text);
			
			message.setJMSPriority(i);

			publihser.publish(message);
		}

	}
	
	public static void sentNonPersistent() throws Exception
	{
		TopicSession session = connection.createTopicSession(false,
				Session.AUTO_ACKNOWLEDGE);

		TopicPublisher publihser = session.createPublisher(topic);

		publihser.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

		for (int i = 0; i &lt; 3; i++)
		{
			String text = "non-persistent message.id=" + i;

			TextMessage message = session.createTextMessage(text);

			publihser.publish(message);
		}

	}

}</PRE>我使用了mysql数据库，并配置了activeMQ将消息持久化到数据库。运行上面的程序，发现mysql数据库中activemq_msgs表没有任何数据。可以证明：持久消息和非持久消息都被MQ消息服务器丢弃了。 
<SPAN><STRONG>无论是持久消息，还是非持久消息，如果消息没有对应的消费者，那么activeMQ会认为这些消息无用，直接删除。</STRONG> 
</SPAN></DIV>
<DIV><BR></DIV>
<P><SPAN><SPAN><STRONG>3.2生产者发送持久消息和非持久消息，只有非持久订阅者</STRONG> 
</SPAN></SPAN><BR></P>
<P>之前的博客已经介绍了：非持久订阅者只有在活动状态，并且和jms 
provider的保持连接情况下，才能收到消息。如果非持久订阅者挂掉了，那么不能再接收任何消息(无论是持久消息，还是非持久消息)。如果订阅者挂掉了，后续jms 
provider再收到消息，就变成了3.1的情况。也就是说：消息是否持久化，和非持久订阅者没有关系。</P>
<DIV><BR></DIV>
<DIV>
<P><SPAN><STRONG>3.3持久消息和非持久消息，发送给离线的持久订阅者</STRONG> </SPAN><BR></P>
<P>消息的发送者源码：</P>
<DIV><PRE class=prettyprint>package mq.aty.persistentmsg;

import javax.jms.DeliveryMode;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.jms.Topic;
import javax.jms.TopicConnection;
import javax.jms.TopicPublisher;
import javax.jms.TopicSession;

import mq.aty.JmsUtils;

/**
 * 直接运行该程序和activeMQ,没有任何的消费者，然后观察持久化介质(我们使用了数据库)
 *
 */
public class NoReceiverTest
{
	private static TopicConnection connection = null;

	private static Topic topic = null;

	public static void main(String[] args) throws Exception
	{
		connection = JmsUtils.getConnection();
		topic = JmsUtils.getTopic();
		
		sentPersistent();
		sentNonPersistent();
		
		connection.close();
	}

	public static void sentPersistent() throws Exception
	{
		TopicSession session = connection.createTopicSession(false,
				Session.AUTO_ACKNOWLEDGE);

		TopicPublisher publihser = session.createPublisher(topic);

		publihser.setDeliveryMode(DeliveryMode.PERSISTENT);

		for (int i = 0; i &lt; 3; i++)
		{
			String text = "I am persistent message.order=" + i;

			TextMessage message = session.createTextMessage(text);
			
			message.setJMSPriority(i);

			publihser.publish(message);
		}

	}
	
	public static void sentNonPersistent() throws Exception
	{
		TopicSession session = connection.createTopicSession(false,
				Session.AUTO_ACKNOWLEDGE);

		TopicPublisher publihser = session.createPublisher(topic);

		publihser.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

		for (int i = 0; i &lt; 3; i++)
		{
			String text = "non-persistent message.id=" + i;

			TextMessage message = session.createTextMessage(text);

			publihser.publish(message);
		}

	}

}</PRE>持久订阅者源码如下： </DIV>
<DIV><PRE class=prettyprint>package mq.aty.persistentmsg;

import javax.jms.JMSException;
import javax.jms.Message;
import javax.jms.MessageListener;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.jms.Topic;
import javax.jms.TopicConnection;
import javax.jms.TopicSession;
import javax.jms.TopicSubscriber;

import mq.aty.JmsUtils;

/**
 * &lt;pre&gt;
 *  1、先运行监听者,向jms server注册,让jms server知道有这个持久订阅者。类似于你向腾讯申请个QQ号码
 *  
 *  2、启动jms server和持久订阅者(运行该类)。查看数据库可以发现activemq_acks中多了一条记录，
 *     也就是说activeMQ识别和接受了我们的持久订阅者
 *    
 *  3、停止持久订阅者，启动生产者向MQ服务器发送持久消息和非持久消息。发现activemq_msgs中多持久消息
 *  
 *  4、运行持久订阅者。发现持久消息和非持久消息都能接受到
 * &lt;/pre&gt;
 * 
 */
public class DurableSubscriberTest
{

	public static void main(String[] args) throws Exception
	{
		TopicConnection connection = JmsUtils.getConnection();
		Topic topic = JmsUtils.getTopic();

		// 创建持久订阅的时候,必须要设置client,否则会报错:
		// javax.jms.JMSException: You cannot create a durable subscriber
		// without specifying a unique clientID on a Connection

		// 如果clientID重复(已经存在相同id的活动连接),会报错
		// javax.jms.InvalidClientIDException: Broker: localhost - Client: 1
		// already connected from tcp://127.0.0.1:2758
		connection.setClientID("1");

		TopicSession session = connection.createTopicSession(false,
				Session.AUTO_ACKNOWLEDGE);

		// 在同一个连接的ClientID下,持久订阅者的名称必须唯一
		// javax.jms.JMSException: Durable consumer is in use for client: 1 and
		// subscriptionName: 11

		// TopicSubscriber subscriber = session.createSubscriber(topic);
		TopicSubscriber subscriber = session.createDurableSubscriber(topic,
				"11");

		subscriber.setMessageListener(new MessageListener() {

			@Override
			public void onMessage(Message msg)
			{
				try
				{
					TextMessage textMsg = (TextMessage) msg;
					System.out.println("DurableSubscriber get:"
							+ textMsg.getText());
				} catch (JMSException e)
				{
					e.printStackTrace();
				}
			}
		});

		connection.start();// 一定要start
	}
}</PRE>
<DIV><BR></DIV>在第二步操作的时候，查看mysql数据库可以发现，数据库表activemq_acks中多了一条记录，记录我们的持久订阅者 
</DIV>
<DIV><IMG alt="" src=""> <BR></DIV>
<P>在第三步操作的时候，查看数据库表activemq_msgs中多了3条持久消息。可以发现activeMQ会将持久消息保存到硬盘。</P>
<DIV><IMG alt="" src=""> <BR></DIV>
<P>最后当我们重新启动持久订阅者的时候，可以发现，持久消息和非持久消息都能够接收到。这个时候 
<SPAN>activemq_msgs中的消息被删除。</SPAN> </P><IMG alt="" 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/aitangyong.htm"> <BR></DIV>
<DIV><BR></DIV>
<P>通过这种情况测试，只能看出持久订阅者和非持久订阅者存在差别： 
<SPAN><STRONG>持久订阅者能够接收离线消息,不管该消息是不是持久消息</STRONG> </SPAN>。 </P>
<P>我们好像还看出持久消息和非持久消息的区别，这是因为我们进行上述测试的时候， 
<SPAN><STRONG>没有关闭activeMQ服务器，所以无论是硬盘上的持久消息，还是内存中的非持久消息，都不会丢</STRONG> </SPAN>。 
</P>
<DIV><BR></DIV>
<P>接下来我们还是使用上面的发送者和接收者源码，但是改变下操作顺序。按照如下顺序进行操作：</P>
<DIV><PRE class=prettyprint>* &lt;pre&gt;
 *  1、先运行监听者,向jms server注册,让jms server知道有这个持久订阅者。类似于你向腾讯申请个QQ号码
 *
 *  2、启动jms server和持久订阅者(运行该类)。查看数据库可以发现activemq_acks中多了一条记录，
 *     也就是说activeMQ识别和接受了我们的持久订阅者
 *  
 *  3、停止持久订阅者，启动生产者向MQ服务器发送持久消息和非持久消息
 *  
 *  4、消息发送成功后，停止activemq服务器、
 *  
 *  5、重新启动mq服务器和订阅者。发现只能接收到持久消息
 * 
 * &lt;/pre&gt;</PRE>
<P>我们发现当activeMQ服务器挂掉再重启的时候，持久订阅者只能收到持久消息，不能收到非持久消息。</P>
<DIV><IMG alt="" src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/aitangyong.htm"> 
<BR></DIV>
<H2><SPAN>4.总结</SPAN> </H2>&nbsp; &nbsp;通过上述测试代码和执行结果，我们得出以下结论： </DIV>
<P>&nbsp; 
<SPAN><SPAN>&nbsp;持久订阅者/非持久订阅者，只影响离线的时候消息(包括持久消息和非持久消息)是否能接收到，和消息是否持久无关；</SPAN> 
</SPAN></P>
<P><SPAN><SPAN>&nbsp; &nbsp;持久消息/非持久消息，只是影响jms 
provider宕机后。消息是否会丢失，如果永远不会宕机，那么持久消息和非持久消息没有区别。</SPAN> </SPAN></P>
<DIV><BR></DIV></DIV></DIV></DIV>
<DIV class=article_social>
<DIV class=article_like>
<DIV id=my_zan class="circle circle-like" data_id="Z3QrqaQ"></DIV></DIV>
<DIV id=share_weixin_image><IMG 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/qrcode.png" width=100 height=100> 
</DIV>
<DIV class=article_share_fav>
<DIV id=ckepop class=share><SPAN>分享</SPAN><BUTTON id=share_weibo_id 
class=share_weibo title=分享到新浪微博 type=submit></BUTTON><BUTTON id=share_qq_id 
class=share_qq title=分享到QQ空间 type=submit></BUTTON><BUTTON id=share_weixin_id 
class=share_weixin type=submit></BUTTON> </DIV>
<DIV class=fav_correct><BUTTON id=my_fav type=submit data_id="Z3QrqaQ"><I 
class="icon icon-star-empty"></I><SPAN id=fav_tip>收藏</SPAN></BUTTON><BUTTON 
id=article-correct type=submit data_id="Z3QrqaQ"><I 
class="icon icon-warning-sign"></I><SPAN>纠错</SPAN></BUTTON> </DIV></DIV>
<SCRIPT type=text/javascript>
$("#share_weibo_id").click( function() {
   window.open("http://share.baidu.com/s?type=text&searchPic=0&sign=on&to=tsina&url=http://www.tuicool.com/articles/Z3QrqaQ&title=%E7%90%86%E8%A7%A3JMS%E8%A7%84%E8%8C%83%E4%B8%AD%E6%B6%88%E6%81%AF%E7%9A%84%E4%BC%A0%E8%BE%93%E6%A8%A1%E5%BC%8F%E5%92%8C%E6%B6%88%E6%81%AF%E6%8C%81%E4%B9%85%E5%8C%96++%28%E5%88%86%E4%BA%AB%E8%87%AA+%40%E6%8E%A8%E9%85%B7%E7%BD%91%29&key=3113829255");
});
$("#share_qq_id").click( function() {
   window.open("http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://www.tuicool.com/articles/Z3QrqaQ&title=%E7%90%86%E8%A7%A3JMS%E8%A7%84%E8%8C%83%E4%B8%AD%E6%B6%88%E6%81%AF%E7%9A%84%E4%BC%A0%E8%BE%93%E6%A8%A1%E5%BC%8F%E5%92%8C%E6%B6%88%E6%81%AF%E6%8C%81%E4%B9%85%E5%8C%96&desc=&summary=&site=");
});
$("#share_weixin_id").click( function() {
  $("#share_weixin_image").toggle();
});
</SCRIPT>

<DIV class="bottom_ad huodong-detail-ad-banner clearfix">
<SCRIPT type=text/javascript>
    var cpro_id = "u1665123";
</SCRIPT>

<SCRIPT type=text/javascript 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/c.js"></SCRIPT>
</DIV></DIV>
<DIV style="CLEAR: both" id=site_articles>
<DIV class=article-part-title><SPAN>推荐文章</SPAN> </DIV>
<UL class=side_article_list>
  <LI class=side_article_list_item>1.<A title=Carthage使用(cocoapods的替代) 
  href="http://www.tuicool.com/articles/FfANF3z" target=_blank> 
  Carthage使用(cocoapods的替代) </A></LI>
  <LI class=side_article_list_item>2.<A title="Git 推荐 | 基于 Openresty 的 Web 应用框架" 
  href="http://www.tuicool.com/articles/z2MJBvv" target=_blank> Git 推荐 | 基于 
  Openresty 的 Web 应用框架 </A></LI>
  <LI class=side_article_list_item>3.<A title="图解 hotwheels：秒级处理 40k 客户端推送" 
  href="http://www.tuicool.com/articles/z2qMJ3V" target=_blank> 图解 
  hotwheels：秒级处理 40k 客户端推送 </A></LI>
  <LI class=side_article_list_item>4.<A title=Elasticsearch结合Nginx使用 
  href="http://www.tuicool.com/articles/zUnQNzr" target=_blank> 
  Elasticsearch结合Nginx使用 </A></LI>
  <LI class=side_article_list_item>5.<A title="为什么你得学些 TCP 的知识？" 
  href="http://www.tuicool.com/articles/fQRJRz" target=_blank> 为什么你得学些 TCP 的知识？ 
  </A></LI>
  <LI class=side_article_list_item>6.<A title="不改变中间层，如何玩转 .NET 的远程处理功能？" 
  href="http://www.tuicool.com/articles/UFbuAnf" target=_blank> 不改变中间层，如何玩转 .NET 
  的远程处理功能？ </A></LI></UL></DIV>
<DIV id=kan_articles></DIV>
<DIV style="DISPLAY: none" id=article_weibo>
<DIV class=article-part-title><SPAN>相关微博</SPAN> <SUB><A 
href="http://www.tuicool.com/articles/weibo_list/Z3QrqaQ" target=_blank>(<I 
id=weibo_num></I>)</A> </SUB></DIV>
<DIV class=related-weibo-list></DIV></DIV>
<DIV class=comments>
<DIV class=comments-area>
<DIV class=comments-header>
<H5>我来评几句</H5>
<DIV style="DISPLAY: none" class="alert comment-alert alert-error">错误 </DIV><TEXTAREA style="resize: none" id=comment-body rows=5 cols=60 placeholder="请输入评论内容..."></TEXTAREA> 
<SPAN id=comment-submit class="btn btn-medium btn-submit">登录后评论</SPAN> 
<P style="MARGIN-TOP: 5px; MARGIN-LEFT: 10px">已发表评论数(<SPAN 
class=comment_cnt></SPAN>) </P></DIV>
<DIV class=comments-list>
<DIV style="DISPLAY: none" class="empty-cmts alert alert-success">没有更多评论了^^ 
</DIV></DIV>
<DIV style="DISPLAY: none" class=more-comments><A 
href="http://www.tuicool.com/articles/">更多评论</A> </DIV>
<DIV style="DISPLAY: none" class=load-fail>评论加载失败，<A 
href="javascript:reload_comments('Z3QrqaQ',1,0,-1);">重新加载</A> 
</DIV></DIV></DIV></DIV>
<DIV class="span4 article_right_side">
<DIV class=right_top>
<DIV class="article_related_site article_detail_bg">
<H4 class=article-part-title>相关站点</H4>
<DIV class="article_related_site_body clearfix">
<DIV class=logo><IMG src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/vQZRB3.png"> 
</DIV>
<DIV class=name>
<DIV><A href="http://www.tuicool.com/sites/vQZRB3" target=_blank>CSDN博客</A> 
</DIV>
<DIV><INPUT id=my_follow class="btn btn-success right_site_follow" value=+&nbsp;订阅 type=button data_id="vQZRB3"> 
</DIV></DIV></DIV></DIV>
<DIV class=right-ad><A 
href="http://yacebao.com/?utm_source=web&amp;utm_medium=banner&amp;utm_campaign=tuicool" 
target=_blank><IMG 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/yunzhihui300.jpg"></A> </DIV>
<DIV style="MARGIN-TOP: 8px" class=right-ad><A 
href="https://www.teambition.com/?utm_source=tuicool&amp;utm_medium=banner01" 
target=_blank><IMG src=""></A> </DIV>
<DIV style="MARGIN-TOP: 8px" class=right-ad>
<SCRIPT type=text/javascript>BAIDU_CLB_fillSlot("1161131");</SCRIPT>
</DIV>
<DIV id=right_site_articles class=article_detail_bg>
<DIV class=article-part-title><SPAN>热门文章</SPAN> </DIV>
<UL class=side_article_list>
  <LI class=side_article_list_item>1.<A title=Carthage使用(cocoapods的替代) 
  href="http://www.tuicool.com/articles/FfANF3z" target=_blank> 
  Carthage使用(cocoapods的替代) </A></LI>
  <LI class=side_article_list_item>2.<A title="Git 推荐 | 基于 Openresty 的 Web 应用框架" 
  href="http://www.tuicool.com/articles/z2MJBvv" target=_blank> Git 推荐 | 基于 
  Openresty 的 Web 应用框架 </A></LI>
  <LI class=side_article_list_item>3.<A title="图解 hotwheels：秒级处理 40k 客户端推送" 
  href="http://www.tuicool.com/articles/z2qMJ3V" target=_blank> 图解 
  hotwheels：秒级处理 40k 客户端推送 </A></LI>
  <LI class=side_article_list_item>4.<A title=Elasticsearch结合Nginx使用 
  href="http://www.tuicool.com/articles/zUnQNzr" target=_blank> 
  Elasticsearch结合Nginx使用 </A></LI>
  <LI class=side_article_list_item>5.<A title="为什么你得学些 TCP 的知识？" 
  href="http://www.tuicool.com/articles/fQRJRz" target=_blank> 为什么你得学些 TCP 的知识？ 
  </A></LI>
  <LI class=side_article_list_item>6.<A title="不改变中间层，如何玩转 .NET 的远程处理功能？" 
  href="http://www.tuicool.com/articles/UFbuAnf" target=_blank> 不改变中间层，如何玩转 .NET 
  的远程处理功能？ </A></LI></UL></DIV></DIV>
<DIV class=operate_zone>
<DIV class="container-body share-body">
<DIV class=article-part-title><SPAN>分享本文</SPAN> </DIV>
<DIV class=share_zone>
<DIV class=bdsharebuttonbox><A class=bds_tsina title=分享到新浪微博 
href="http://www.tuicool.com/articles/Z3QrqaQ#" data-cmd="tsina"></A><A 
class=bds_qzone title=分享到QQ空间 href="http://www.tuicool.com/articles/Z3QrqaQ#" 
data-cmd="qzone"></A><A class=bds_tqq title=分享到腾讯微博 
href="http://www.tuicool.com/articles/Z3QrqaQ#" data-cmd="tqq"></A><A 
class=bds_renren title=分享到人人网 href="http://www.tuicool.com/articles/Z3QrqaQ#" 
data-cmd="renren"></A><A class=bds_weixin title=分享到微信 
href="http://www.tuicool.com/articles/Z3QrqaQ#" data-cmd="weixin"></A><A 
class=bds_more href="http://www.tuicool.com/articles/Z3QrqaQ#" 
data-cmd="more"></A></DIV>
<SCRIPT>
        window._bd_share_config = {
            "common" : {
                "bdSnsKey" : {
                    "tsina" : "3113829255",
                    "tqq" : "801536792"
                },
                "bdText" : "理解JMS规范中消息的传输模式和消息持久化 (分享自 @推酷网)",
                "bdMini" : "2",
                "bdMiniList" : false,
                "bdPic" : "http://aimg1.tuicool.com/AniEji.jpg",
                "bdStyle" : "1",
                "bdSize" : "24"
            },
            "share" : {}
        };
        with (document)
        0[(getElementsByTagName('head')[0] || body).appendChild(createElement('script')).src = 'http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=' + ~(-new Date() / 36e5)];
    </SCRIPT>
</DIV></DIV>
<DIV class=frd_pos>
<SCRIPT src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/f.txt" async></SCRIPT>
<INS style="WIDTH: 300px; DISPLAY: inline-block; HEIGHT: 250px" 
class=adsbygoogle data-ad-slot="5705695566" 
data-ad-client="ca-pub-7054762349007490"></INS>
<SCRIPT>
(adsbygoogle = window.adsbygoogle || []).push({});
</SCRIPT>
</DIV></DIV></DIV></DIV>
<DIV class=read-later-alert></DIV>
<DIV><A style="DISPLAY: none" id=add-article-to-kan-btn class=btn 
href="http://www.tuicool.com/articles/Z3QrqaQ#add-article-to-kan" 
data-toggle="modal">添加到推刊</A> <!-- add_article to kan -->
<DIV aria-hidden=true id=add-article-to-kan class="modal hide fade" role=dialog 
tabIndex=-1 aria-labelledby=myModalLabel>
<DIV class=modal-header><SPAN class=add-title>收藏到推刊</SPAN> <A 
class="btn pull-right" href="http://www.tuicool.com/articles/Z3QrqaQ#new-kan" 
data-toggle="modal">创建推刊</A> <I class=clearfix></I></DIV>
<DIV class=modal-body>
<UL id=add-kan-list></UL></DIV>
<DIV class=modal-footer><INPUT class=article-id value=Z3QrqaQ 
type=hidden><BUTTON class="btn btn-primary pull-left add-to-btn" type=submit>收 
藏</BUTTON><BUTTON aria-hidden=true class=btn type=submit 
data-dismiss="modal">取消</BUTTON> </DIV></DIV>
<DIV class=add-article-to-kan-alert>已收藏到推刊！ </DIV>
<DIV aria-hidden=true id=new-kan class="modal hide fade" role=dialog tabIndex=-1 
aria-labelledby=myModalLabel>
<DIV class=modal-body><INPUT id=new-kan-name type=text name=name 
placeholder="推刊名(必填)" data-validation-required-message="请填写推刊名" required> <SPAN 
class=new-ness-name>请填写推刊名</SPAN> <BR><TEXTAREA id=desc rows=6 name=desc placeholder="推刊描述"></TEXTAREA> <SPAN 
class=new-ness-desc>描述不能大于100个字符!</SPAN> <BR>权限设置：<INPUT value=1 CHECKED 
type=radio name=type> 公开 <INPUT value=0 type=radio name=type> 仅自己可见 </DIV>
<DIV class=modal-footer><BUTTON class="btn btn-primary pull-left create-kan-btn" 
disabled type=submit>创建</BUTTON><BUTTON aria-hidden=true 
class="btn dismiss-new-kan" type=submit data-dismiss="modal">取消</BUTTON> 
</DIV></DIV></DIV>
<DIV aria-hidden=false id=article-correct-modal class="modal hide fade in" 
role=dialog tabIndex=-1 aria-labelledby=myModalLabel>
<DIV class=modal-header><BUTTON aria-hidden=true class=close type=button 
data-dismiss="modal">×</BUTTON> 
<H3>文章纠错</H3></DIV>
<DIV class=modal-body><INPUT id=article-correct-source value=Z3QrqaQ 
type=hidden> 
<DIV><LABEL for=article-correct-email>邮箱地址 </LABEL><INPUT 
id=article-correct-email class=input-large type=email> </DIV>
<DIV><LABEL for=article-correct-select>错误类型 </LABEL><SELECT 
id=article-correct-select> <OPTION selected value=正文不准确>正文不准确</OPTION> <OPTION 
  value=排版有问题>排版有问题</OPTION> <OPTION value=没有分页内容>没有分页内容</OPTION> <OPTION 
  value=视频无法显示>视频无法显示</OPTION> <OPTION value=图片无法显示>图片无法显示</OPTION></SELECT> 
</DIV>
<DIV><LABEL for=article-correct-other>补充信息 </LABEL><TEXTAREA id=article-correct-other class=span6></TEXTAREA> </DIV></DIV>
<DIV class=modal-footer><BUTTON id=article-correct-submit 
class="btn btn-primary pull-right huodong_correct_submit" 
type=submit>&nbsp;&nbsp;提交&nbsp;&nbsp;</BUTTON> </DIV></DIV>
<STYLE type=text/css>.btn-large {
	PADDING-BOTTOM: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px; PADDING-TOP: 0px
}
.load-fail {
	DISPLAY: none
}
</STYLE>

<SCRIPT src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/highlight.pack.js"></SCRIPT>

<SCRIPT type=text/javascript>
    $('table').each(function(i) {
        var size = $(this).children().size();
        if (size > 1) {
            $(this).attr('class',"table table-bordered");
        } else if (size == 1) {
            var e11 = $(this).children(":first");
            var e1 = e11[0];
            var name = e1.nodeName.toLowerCase();
            if ("tbody" == name) {
                if (e11.children().size() > 1) {
                     $(this).attr('class',"table table-bordered");
                }
            }
        }
    });
            related_kan("Z3QrqaQ");
        window.page = 0;
        window.last = 0;    
        window.first = true;
        resize_article_image('#nei', 550);
                load_comments("Z3QrqaQ",1,0,-1);
                window.uid = -1;
        open_add_article_to_kan("false");
        async_do_zan_article(); 
        $('pre').each(function(i, e) {
            hljs.highlightBlock(e, "<span class='indent'>  </span>", false)
        });
       
          
       handle_follow_site("#my_follow","已订阅","+ 订阅");
</SCRIPT>
</DIV>
<DIV class=footer>
<DIV class=footer-inner>
<DL class="about-link site-link">
  <DT>网站相关 </DT>
  <DD><A href="http://www.tuicool.com/about" target=_blank>关于我们</A> </DD>
  <DD><A href="http://www.tuicool.com/mobile" target=_blank>移动应用</A> </DD>
  <DD><A href="http://www.tuicool.com/bbs/go/issues" target=_blank>建议反馈</A> 
</DD></DL>
<DL class="site-link follow-link">
  <DT>关注我们 </DT>
  <DD><A href="http://e.weibo.com/tuicool2012" target=_blank><IMG 
  src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/weibo-32.png">推酷网</A> </DD>
  <DD><IMG src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/weixin-32.png">tuicool2012 
  </DD>
  <DD><IMG src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/qun-54.png">QQ群:164644910 
  </DD></DL>
<DL class="site-link links">
  <DT>友情链接 </DT>
  <DD><A title=人人都是产品经理 href="http://www.woshipm.com/" 
  target=_blank>人人都是产品经理</A> <A title=TMTForum href="http://www.tmtforum.com/" 
  target=_blank>TMTForum</A> <A title=魔部网 href="http://www.moobuu.com/" 
  target=_blank>魔部网</A> <A title=PM256 href="http://www.pm265.com/" 
  target=_blank>PM256</A> <A title=品途网 href="http://www.pintu360.com/" 
  target=_blank>品途网</A> <A title=移动信息化 href="http://www.yidonghua.com/" 
  target=_blank>移动信息化</A> <A title=行晓网 href="http://www.snsiu.com/" 
  target=_blank>行晓网</A> <A title=Code4App href="http://code4app.com/" 
  target=_blank>Code4App</A> <A title=智城外包网 href="http://www.taskcity.com/" 
  target=_blank>智城外包网</A> <A title=LAMP人 href="http://blog.lamper.cn/" 
  target=_blank>LAMP人</A> <A title=安卓航班网 href="http://www.apkway.com/forum.php" 
  target=_blank>安卓航班网</A> <A title=虎嗅 href="http://www.huxiu.com/" 
  target=_blank>虎嗅</A> <A title=缘创派 href="http://www.ycpai.com/" 
  target=_blank>缘创派</A> <A title=IT耳朵 href="http://www.iterduo.com/" 
  target=_blank>IT耳朵</A> <A title=艾瑞网 href="http://www.iresearch.cn/" 
  target=_blank>艾瑞网</A> <A title=创媒工场 href="http://mediaworks.caixin.com/" 
  target=_blank>创媒工场</A> <A title=雷锋网 href="http://www.leiphone.com/" 
  target=_blank>雷锋网</A> <A title=经理人分享 href="http://www.managershare.com/" 
  target=_blank>经理人分享</A> <A title=市场部网 href="http://www.shichangbu.com/" 
  target=_blank>市场部网</A> <A title=砍柴网 href="http://www.ikanchai.com/" 
  target=_blank>砍柴网</A> <A title=CocoaChina href="http://www.cocoachina.com/" 
  target=_blank>CocoaChina</A> <A title=北风网 href="http://www.ibeifeng.com/" 
  target=_blank>北风网</A> <A title=云智慧 href="http://www.jiankongbao.com/" 
  target=_blank>云智慧</A> <A title=我赢职场 href="http://www.wyzc.com/" 
  target=_blank>我赢职场</A> <A title=大数据时代 href="http://www.thebigdata.cn/" 
  target=_blank>大数据时代</A> <A title=奇笛网 href="http://www.qidic.com/" 
  target=_blank>奇笛网</A> <A title=咕噜网 href="http://www.cngulu.com/" 
  target=_blank>咕噜网</A> <A title=红联linux href="http://www.linuxdiyf.com/" 
  target=_blank>红联linux</A> <A title=Win10之家 href="http://win10.ithome.com/" 
  target=_blank>Win10之家</A> <A title=鸟哥笔记 href="http://www.niaogebiji.com/" 
  target=_blank>鸟哥笔记</A> <A title=爱游戏 href="http://www.play.cn/" 
  target=_blank>爱游戏</A> <A title=投资潮 href="http://www.investide.cn/" 
  target=_blank>投资潮</A> <A title=31会议网 href="http://www.31huiyi.com/" 
  target=_blank>31会议网</A> <A title=极光推送 href="https://www.jpush.cn/" 
  target=_blank>极光推送</A> <A title=Teambition href="https://www.teambition.com/" 
  target=_blank>Teambition</A> <A title=Cocos引擎中文官网 
  href="http://cn.cocos2d-x.org/" target=_blank>Cocos引擎中文官网</A> <A title=硅谷网 
  href="http://www.guigu.org/" target=_blank>硅谷网</A> <A 
  href="http://www.tuicool.com/links">更多链接&gt;&gt;</A>&nbsp;&nbsp; </DD></DL>
<DIV class=clear></DIV></DIV></DIV>
<DIV style="DISPLAY: none">
<SCRIPT language=JavaScript 
src="理解JMS规范中消息的传输模式和消息持久化%20-%20推酷_files/stat.php"></SCRIPT>
</DIV></BODY></HTML>
